# Programming Process Evaluator 機能仕様書

**作成日**：2026/2/24  
**版数**：1  
**作成者**：樋田巧  

**改版履歴**：

|ver.|発行日|改訂内容|作成者|
|----|----|----|----|  
|1|2026/2/24|初版の作成|樋田|

## 概要

本システムは、プログラミングのソースコードログからルーブリック評価を可能にするシステムの開発と検証を行うための実践的なプログラミング学習学習システムである。

**対象**：高校1年生の「情報Ⅰ」におけるプログラミング演習

**システムの概要**：生徒は本システムのエディター上で提示された課題に従いプログラミングを実施する。システムは30秒間隔でソースコードを自動的に収集・ログ化し、蓄積されたコード変更履歴から試行錯誤のプロセスを分析して、自動的にルーブリック評価を行う。

**位置づけ**：本システムは授業での実用化よりも、プログラミング学習プロセスの可視化と自動評価手法の研究を主目的とした開発である。そのため、研究への同意確認機能やシステム利用後に研究データ収集用のアンケート機能等を実装する。


## 用語

|用語|説明|
|----|----|
|作問|新しい問題を作成する|
|ルーブリック|学習成果を評価するための複数の観点と段階を示した評価基準表。各段階に具体的な評価基準が記載されている。|
|コードログ|生徒がプログラムを編集する際に、30秒ごとに自動保存されたソースコードの履歴。試行錯誤のプロセスを記録する。|
|試行錯誤|問題を解くため、複数の異なるアプローチや修正を繰り返して実施するプロセス。|
|自動評価|収集されたコードログに基づいて、システムが自動的に生成する評価。ルーブリックの基準に沿って算出される。|
|匿名化|生徒の個人情報（氏名、出席番号など）を削除または隠匿し、個人を特定できないようにする処理。|

## 機能要件

### 生徒向け機能

#### アカウント機能

**概要**：生徒は配布されたIDとパスワードによってシステムにログイン・ログアウトできる機能

**機能詳細**：

- **ログイン・ログアウト**
  - IDとパスワードを入力してログインできる
  - ログアウト機能により、セッションを終了できる

- **IDフォーマット**
  - IDは"st000"の形式で発行される（例：st001、st002）
  - IDは一意であり、重複は発生しない

- **パスワード**
  - ランダムに生成される8文字の文字列で構成される
  - 英字大文字・小文字・数字・記号を混ぜた構成となる
  - 生徒による変更は不可能

- **アカウント情報**
  - 学校情報・クラス情報があらかじめアカウントに付随する
  - 出席番号・氏名とは紐づけられず、完全匿名での収集とする
  - IDおよびパスワードの変更は生徒側では実行できず、教師アカウントからのみ変更可能

#### 研究協力同意機能

**概要**：生徒の初回ログイン時に、本研究へのデータ収集・分析協力に関する同意確認を行う機能

**機能詳細**：

- **同意確認タイミング**
  - 初回ログイン時にのみ表示される
  - 同意確認完了後は再度表示されない

- **同意文書**
  - 東京学芸大学および研究協力校の研究倫理ガイドラインに基づいた文章を提示する

- **同意の選択**
  - 「同意する」「同意しない」の選択肢を提示する

- **同意記録**
  - 生徒の同意選択および同意日時をシステムに記録する
  - 記録は完全匿名であり、生徒個人を特定できない形式で保存される

- **プリント同意**
  - システム上の同意確認とは別に、プリント形式での同意書確認も実施する

#### 課題提示機能

**概要**：生徒が取り組む課題を提示し、難易度に応じた課題の選択を可能にする機能

**機能詳細**：

- **課題難易度**
  - 初級、中級、上級の3つの難易度から生徒が選択できる
  - 各難易度は独立した課題として提示される

- **課題内容の提示**
  - 選択された難易度の課題について、以下の情報を提示する：
    - 課題の説明文
    - 課題で実装すべき機能の詳細
    - 実装に関する制約や注意事項

- **入力の制限**
  - 課題ごとに入力値の制限を明記する
  - 例：「整数値のみを入力」「1～100の範囲」など
  - 入力フォーマットの例を提示する

- **想定される入出力**
  - 各課題に対して複数の想定入出力例（テストケース）を提示する
  - 各テストケースについて、以下を含む：
    - 入力値の例
    - 期待される出力値

- **課題選択画面**
  - 3つの難易度を一覧表示し、生徒が選択できるインターフェースを提供する
  - 一度選択した課題は、エディター画面で確認・参照できる

- **エディター画面での確認**
  - エディター画面から課題内容、入力の制限、想定される入出力をいつでも確認できる
  - 課題情報は画面の側部または別パネルに常時表示され、参照の妨げにならないよう配置される

#### エディター機能

**概要**：生徒がPythonのコードを記述・編集し、実行できる機能

**機能詳細**：

- **コード編集**
  - Pythonのコードをシステム上のエディターで記述・編集できる
  - シンタックスハイライト機能により、コードの可読性を向上させる
  - インデント補助機能により、Python特有のインデント構文をサポートする

- **保存機能**
  - 記述したコードはシステムに保存できる
  - 保存されたコードは自動的にログとして記録される
  - 上書き保存により、最新のコード状態を常に保持する

- **実行機能**
  - 保存されたコードをシステム上で実行できる
  - 実行結果（標準出力）をエディター画面に表示する
  - 実行時のエラーメッセージも画面に表示する

- **非対応機能**
  - ファイルの書き出し（外部ファイル保存）には対応しない
  - ファイルの読み込み（外部ファイルの入力）には対応しない
  - 新規ファイルの作成には対応しない
  - 上記制限により、ソースコードログの収集精度を確保する

#### ルーブリック表示機能

**概要**：課題の評価基準となるルーブリックを生徒が確認できるヒント機能

**機能詳細**：

- **ルーブリックボタン**
  - エディター画面にルーブリックボタンを配置する
  - ボタンクリックにより、課題のルーブリック情報を表示する

- **ルーブリック表示内容**
  - 以下の2つの観点のルーブリックを表示する：
    - 「思考力・判断力・表現力」
    - 「主体的に学習に取り組む態度」

- **各観点のルーブリック構成**
  - 各観点について、5段階の評価基準を提示する
  - 各段階ごとに以下の情報を含める：
    - 段階レベル（1～5）
    - 段階の説明

- **表示方法**
  - ルーブリック情報は別ウィンドウまたはモーダルダイアログで表示される
  - エディターの操作を妨げない配置にする
  - ウィンドウは生徒が自由に開閉できる

#### コマンド仕様表示機能

**概要**：課題の解決に必要なPythonコマンドの使用方法をヒント機能として提供する機能

**機能詳細**：

- **ヒントボタン**
  - エディター画面にヒントボタンを配置する
  - ボタンクリックにより、課題に関連するコマンド情報を表示する

- **コマンド情報の提示**
  - 課題で使用すると想定されるPythonコマンドの以下の情報を表示する：
    - コマンド名
    - コマンドの説明（用途、機能）
    - コマンドの使用方法（構文）
    - サンプルコード（実行例）

- **サンプルコード**
  - 各コマンドについて、実装に役立つ具体的なサンプルコードを複数提示する
  - サンプルコードは実際に実行可能な形で記載する

- **表示方法**
  - ヒント情報は別ウィンドウまたはパネルで表示され、エディターの操作を妨げない
  - 複数回クリックして異なるコマンド情報を参照できる

#### コードログ収集機能

**概要**：生徒が編集しているPythonコードを定期的に自動収集し、試行錯誤のプロセスを記録する機能

**機能詳細**：

- **自動保存**
  - システムは30秒ごとにエディター内の現在のコード状態を自動保存する
  - 生徒による明示的な保存操作とは独立して動作する

- **ログ記録**
  - 自動保存されたコードには、以下の情報を記録する：
    - コード内容
    - 保存日時（タイムスタンプ）
    - 保存時の処理状態（実行成功/失敗など）

- **変更履歴の保持**
  - 30秒ごとの保存により、コードの変更履歴を時系列で記録する
  - 生徒の試行錯誤のプロセスを可視化できるようにする

- **ログの用途**
  - 収集されたコードログは、試行錯誤のプロセス分析に利用される
  - ルーブリック評価の自動化に活用される

#### 評価表示機能

**概要**：システムが自動生成したルーブリック評価を生徒に表示し、評価根拠とコードログの確認を可能にする機能

**機能詳細**：

- **評価対象の観点**
  - 「思考力・判断力・表現力」
  - 「主体的に学習に取り組む態度」
  - 上記2つの観点から総合的に評価する

- **評価段階**
  - 各観点について5段階評価を実施する
  - 段階は明確に区別され、視覚的に判別可能な形で表示される

- **評価の自動生成**
  - 収集されたコードログに基づいてシステムが自動的に評価を生成する
  - ルーブリックの基準に沿った評価ロジックを適用する

- **評価結果の表示**
  - 各観点の評価段階を表示する
  - 各観点の評価結果を視覚的に表現する（例：星印、バー表示）

- **評価理由の提示**
  - 各観点の評価に至った具体的な理由を記載する
  - 例：「変数管理が効率的に行われている」「複数回の試行錯誤が確認できる」など

- **コードログの確認**
  - 生徒は評価に基づくコードログを確認できる
  - 時系列に整理されたコード変更履歴を表示する
  - 特定のタイムスタンプのコード状態を確認可能にする

- **評価詳細画面**
  - 評価結果、評価理由、コードログを一つの画面または複数タブで確認できるようにする
  - 生徒が自らの学習プロセスを振り返られるよう設計する

#### アンケート機能

**概要**：研究データ収集のため、システムの評価に対する生徒の自己評価および意識調査を実施する機能

**実施対象**：

- 研究協力同意機能で「同意する」を選択した生徒のみが対象

**機能詳細**：

- **システム評価の提示**
  - アンケート冒頭でシステムが生成した評価結果を再度提示する
  - 「思考力・判断力・表現力」「主体的に学習に取り組む態度」の各評価を明示する

- **自己評価**
  - 生徒がシステムの評価を見た上で、自らの学習について5段階で自己評価を行う
  - 自己評価の根拠について、記述式で理由を入力する

- **試行錯誤プロセス評価に対する意識調査**
  - システムが試行錯誤のプロセスを評価することについての考えを5段階で評価する
  - スケール：「強く否定する」→「強く肯定する」
  - 評価の理由について、記述式での回答を求める

- **システム操作性に対する評価**
  - エディターなどシステム全体の操作性に対して5段階評価を実施する
  - 操作性に関する具体的なフィードバック（改善すべき点など）を記述式で入力させる

- **アンケート画面設計**
  - 各項目は段階的に表示され、生徒が迷わないよう設計する
  - 必須項目と任意項目を明確に区別する
  - 記述式の回答欄は適切なサイズを確保する

- **データ保存**
  - 回答データは完全匿名の状態で記録される
  - アンケート回答日時も記録する

### 教員向け機能

#### アカウント情報管理機能

**概要**：教師が生徒アカウントを一元管理し、新規作成・確認・エクスポートができる機能

**機能詳細**：

- **管理者アカウント**
  - 管理者アカウントは個人に対して1つ発行される
  - 教師はこのアカウントを使用してシステムにログインする

- **生徒アカウント作成**
  - 教師は新たな生徒アカウントを作成できる
  - アカウント作成時に以下の情報を指定する：
    - 学校情報
    - クラス情報
    - 生徒人数
  - 指定した人数分のアカウントが一括で自動生成される

- **生徒IDの自動採番**
  - IDは"st000"の形式で自動発行される（例：st001、st002）
  - IDは一意であり、重複は発生しない
  - 既存のIDの次の番号が自動で割り当てられる

- **パスワードの自動生成**
  - 各生徒アカウントに対してランダムなパスワードが自動生成される
  - パスワードは8文字の文字列で構成される
  - 英字大文字・小文字・数字・記号を混ぜた構成となる

- **アカウント情報の確認**
  - 教師は作成した全ての生徒アカウントのID・パスワードを確認できる
  - アカウント一覧画面で、学校・クラスごとにフィルタリング表示できる

- **CSVエクスポート機能**
  - 生徒アカウント一覧をCSVファイルとしてダウンロードできる
  - CSVフォーマット：
    - 1行目：ヘッダー（ID、パスワード、学校、クラス、作成日時）
    - 2行目以降：各生徒アカウント情報
    - 例：`st001,AbC12!@x,東京学芸大学附属高等学校,1年A組,2026-02-24 10:30:00`
  - エクスポートされたファイルは教師が生徒に配布可能

- **アカウント操作履歴**
  - アカウント作成・削除などの操作は記録される

#### 課題作成機能

**概要**：教師が学校・クラスを指定して、新たなプログラミング課題を作成する機能

**機能詳細**：

- **課題作成対象の指定**
  - 教師は学校情報とクラス情報を指定して課題を作成する
  - 指定されたクラスの全生徒がその課題にアクセスできるようになる

- **課題難易度の設定**
  - 初級、中級、上級の3つの難易度レベルの課題を作成できる
  - 各難易度は独立した課題として設定される

- **課題内容の入力**
  - 課題説明文：課題の概要と目標を記述する
  - 実装機能：課題で実装すべき機能の詳細を記述する
  - 制約・注意事項：実装に関する制約条件や注意点を記述する

- **入力値制限の定義**
  - 課題で想定される入力値の制限を明記する
  - 例：「整数値のみを入力」「1～100の範囲」「文字列の最大長は50文字」など
  - 入力フォーマットの例を具体的に提示する

- **想定入出力例（テストケース）の作成**
  - 各課題に対して複数のテストケースを作成できる
  - 各テストケースは以下の情報を含む：
    - 入力値の具体例
    - 期待される出力値
    - テストケースの簡潔な説明（例：「正常系」「境界値」など）
  - 最低3つ以上のテストケースを推奨

- **Pythonコマンド仕様の入力**
  - 課題で使用すると想定されるPythonコマンドについてのヒント情報を入力できる
  - 各コマンドについて以下の情報を記載：
    - コマンド名
    - コマンドの説明（用途、機能）
    - コマンドの使用方法（構文）
    - サンプルコード（実行例）
  - 複数のコマンドを登録できる
  - 入力されたコマンド仕様は、生徒がエディター画面のヒントボタンから確認可能になる

- **課題プレビュー**
  - 課題作成時に、生徒側での表示形式をプレビューできる
  - 課題内容が適切に表示されるか確認可能にする
  - ヒント情報も併せてプレビュー可能にする

- **課題保存・公開**
  - 作成した課題をシステムに保存できる
  - 保存後、指定したクラスの生徒に自動的に公開される
  - 公開日時を設定して、特定の日時に課題を公開することも可能

- **課題編集・削除**
  - 作成済みの課題を編集（更新）できる
  - 編集時は、既に回答した生徒への影響を考慮し、警告メッセージを表示する
  - 課題の削除は論理削除で実行される

#### 学習履歴確認機能

**概要**：教師が生徒の課題進捗状況をリアルタイムで確認し、学習活動を把握する機能

**機能詳細**：

- **進捗状況一覧表示**
  - 生徒の課題進捗状況を一覧形式で表示する
  - クラスごとにフィルタリングして確認できる

- **リアルタイム更新**
  - 生徒の学習状況がリアルタイムで画面に反映される
  - 自動更新間隔は10～30秒程度とする

- **課題ステータスの表示**
  - 各生徒について以下の状態を表示する：
    - **実施中の課題**：現在取り組んでいる課題名と難易度
    - **終了した課題**：完了した課題の一覧
    - **未着手の課題**：まだ開始していない課題

- **取り組み時間の表示**
  - 各課題について、生徒が実際に費やした取り組み時間を表示する
  - 時間表示フォーマット：「○時間○分○秒」

- **一覧の構成**
  - 生徒ID（またはIDの一部）
  - 実施中の課題（課題名、難易度、経過時間）
  - 終了した課題（課題名、難易度、取り組み時間）
  - 最終更新日時

- **並び替え・フィルタ機能**
  - 一覧を以下の条件で並び替え可能：
    - 生徒ID
    - 課題ステータス
    - 取り組み時間（昇順・降順）
  - クラス、難易度による絞り込み表示

- **詳細確認への遷移**
  - 一覧の各行をクリックすると、当該生徒の詳細な学習履歴を確認できる
  - 詳細画面では、コードログや評価結果も参照可能

- **エクスポート機能**
  - 学習履歴をCSV形式でダウンロード可能にする

#### 評価確認機能

**概要**：教師が生徒の自動評価結果を一覧で確認し、個別の評価詳細を閲覧する機能

**機能詳細**：

- **評価一覧表示**
  - 全生徒の評価結果を一覧形式で表示する
  - クラスごとにフィルタリングして確認できる

- **一覧に表示される情報**
  - 生徒ID
  - 課題名・難易度
  - 「思考力・判断力・表現力」の評価段階（5段階）
  - 「主体的に学習に取り組む態度」の評価段階（5段階）
  - 評価実施日時
  - 総合評価（視覚的表現）

- **並び替え・フィルタ機能**
  - 一覧を以下の条件で並び替え可能：
    - 生徒ID
    - 課題名
    - 評価段階（昇順・降順）
    - 評価実施日時
  - クラス、難易度、評価段階による絞り込み表示

- **詳細確認への遷移**
  - 一覧の生徒IDまたは生徒名（IDの一部表示）をクリックすると、当該生徒の評価詳細画面に遷移する
  - 詳細画面では以下の情報を確認できる：
    - **評価結果**：各観点の評価段階を視覚的に表現
    - **評価理由**：各観点の評価に至った具体的な根拠
    - **ソースコードログ**：時系列に整理されたコード変更履歴
    - **課題情報**：課題名、難易度、実施期間

- **評価詳細画面の構成**
  - タブまたはセクション分けで以下を表示：
    - 「評価結果」タブ：各観点の評価を視覚的に表現
    - 「評価理由」タブ：詳細な評価根拠のテキスト
    - 「コードログ」タブ：時系列のコード変更履歴と各時点でのコード内容
  - コードログは特定のタイムスタンプを選択して当該時点のコード状態を表示可能

- **複数課題への対応**
  - 生徒が複数の課題に取り組んでいる場合、各課題の評価結果を個別に確認できる
  - 課題ごとに評価詳細を表示する

- **エクスポート機能**
  - 評価結果をCSV形式でダウンロード可能にする
  - CSVには一覧に表示される全情報を含める

#### アンケート結果確認機能

**概要**：教師が生徒から収集したアンケート回答結果を確認し、研究データとして活用する機能

**機能詳細**：

- **アンケート結果一覧表示**
  - 研究に同意した全生徒のアンケート回答結果を一覧形式で表示する
  - クラスごとにフィルタリングして確認できる

- **一覧に表示される情報**
  - 生徒ID
  - 課題名・難易度
  - システム自己評価（5段階）
  - 試行錯誤プロセス評価（5段階：否定～肯定）
  - システム操作性評価（5段階）
  - アンケート回答日時
  - 回答完了状態（完了/未完了）

- **詳細確認への遷移**
  - 一覧の生徒IDをクリックすると、当該生徒の詳細なアンケート回答内容を確認できる
  - 詳細画面では以下の情報を表示：
    - **システム評価の提示**：システムが出した評価結果
    - **自己評価**：生徒の自己評価（5段階）と記述式の理由
    - **試行錯誤プロセス評価**：評価（5段階）と記述式の理由
    - **システム操作性評価**：評価（5段階）と記述式のフィードバック

- **並び替え・フィルタ機能**
  - 一覧を以下の条件で並び替え可能：
    - 生徒ID
    - 課題名
    - 評価段階（昇順・降順）
    - アンケート回答日時
  - クラス、難易度、回答状態による絞り込み表示

- **CSVエクスポート機能**
  - アンケート結果をCSV形式でダウンロード可能にする
  - CSVフォーマット：
    - 1行目：ヘッダー（生徒ID、課題名、難易度、システム自己評価、試行錯誤評価、操作性評価、回答日時）
    - 2行目以降：各生徒のアンケート回答結果
    - 記述式の回答は別カラムまたは別ファイルで出力
  - エクスポート時にフィルタ条件を反映したデータのみをダウンロード可能

- **記述式回答のエクスポート**
  - 記述式の理由・フィードバックを含むテキストファイルも別途ダウンロード可能にする
  - フォーマット：「生徒ID_課題名_項目」ごとに記述内容を整理

## 非機能要件

### 対応環境

- **対応デバイス**：PC（スマートフォンは想定しない）
- **対応ブラウザ**：最新の主要ブラウザ（Chrome、Firefox、Safari、Edge）の最新バージョンに対応する

### 技術スタック

- **Webフレームワーク**：Servlet
- **フロントエンド**：HTML・JSP
- **スタイル**：CSS
- **バックエンド言語**：Java
- **プログラミング実行環境**：Python 3.x

### スケーラビリティ

- **対応ユーザ数**：最大1000アカウント
- **同時接続数**：最大100セッション
- **コードログ保存容量**：生徒1人あたり約100MB想定

### セキュリティ（Security）

- **通信暗号化**
  - 全ての通信はSSL/TLSによって暗号化する
- **認証**
  - IDとパスワード認証により、ユーザを識別する
- **認可（Authorization）**
  - ロールベースアクセス制御（生徒/教師）を実装する
  - 生徒は自身のデータのみ閲覧可能
  - 教師は指定したクラスのデータのみ閲覧可能

### 認証・認可

- **パスワード要件**
  - 半角英数字の大文字・小文字・数字・記号から3種類以上かつ、8文字以上32文字以下
- **ログイン試行制限**
  - 5回連続でログイン失敗した場合、アカウントを30分間ロックする。教師アカウントから解除できる
- **セッション管理**
  - セッションタイムアウト時間は30分とする
  - ログアウト時にセッションを完全に破棄する

### パフォーマンス（Performance）

- **レスポンス時間**
  - 画面読み込み時間は3秒以内を目安とする
  - コードの実行結果表示は2秒以内を目安とする
- **処理速度**
  - データベースクエリの実行時間は1秒以内とする
  - コードログの自動保存は3秒以内に完了させる

### 信頼性（Reliability）

- **エラーハンドリング**
  - 予期しないエラーが発生した場合、ユーザに適切なエラーメッセージを表示する
  - エラーログはサーバに記録される
- **データ保持**
  - ユーザデータは安全に保持され、意図しない削除から保護される
- **論理削除**
  - 全ての削除は論理削除とし、万が一誤って削除した場合にも復帰できるようにする
- **エラーから の復旧**
  - サーバダウン時のコード自動保存機能により、最新のコード状態を保証する

### 保守性

- **コードのモジュール化**
  - システムはMVC（Model-View-Controller）パターンに基づいて設計される
  - コンポーネント間の結合度を低くし、機能追加やバグ修正を容易にする
- **ドキュメンテーション**
  - API仕様書、データベース設計書、システム構成図などのドキュメントを提供する
  - コードにはコメントを適切に記載し、可読性を確保する
- **バージョン管理**
  - ソースコードはGitなどのバージョン管理システムで管理される

### ユーザビリティ（Usability）

- **インターフェースの直感性**
  - ユーザインターフェースは直感的で、初めてのユーザでも簡単に操作できるように設計する
  - 生徒向けと教師向けで、それぞれ適切に設計される
- **アクセシビリティ**
  - WCAG 2.1 レベルA以上に準拠した設計を目指す
  - 色覚異常者への配慮として、色以外の情報で判別可能にする

### データ整合性（Data Integrity）

- **入力値チェック**
  - データベースに登録する値が正しいことを確認し、処理を行うか行わないか判断する
  - フロントエンド・バックエンド両側でバリデーションを実施する
- **SQLインジェクション対策**
  - プリペアドステートメント（Prepared Statements）を使用してエスケープ処理を行う
  - ユーザ入力は全て無害化される

### 匿名性・プライバシー保護

- **個人情報の非識別化**
  - 生徒データは出席番号・氏名と紐づけられず、IDのみで管理される
  - システム内のデータは完全匿名であり、個人を特定できない形式で保存される
- **データアクセス制限**
  - 教師は自分が所属するクラスのデータのみアクセス可能
  - 研究データの外部提供時も個人を特定できない形式で行われる

### コード実行環境の安全性

- **サンドボックス化**
  - 生徒が実行するコードは独立した環境（サンドボックス）で実行される
  - 無限ループや過度なリソース使用を制限する
- **実行タイムアウト**
  - コード実行時間を最大5秒とし、それ以上実行されないようにする
- **出力バッファ制限**
  - コード実行による標準出力は最大10,000文字までに制限される
